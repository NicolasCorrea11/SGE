@page "/usermod/{Id:int}"
@rendermode InteractiveServer
@inject CasoDeUsoUsuarioModificacion CasoDeUsoUsuarioModificacion
@inject CasoDeUsoUsuarioConsultaId UsuarioConsulta
@inject NavigationManager Navigation
@inject UsuarioLogeado usuario
<PageTitle>SGE | Usuarios</PageTitle>

<<<<<<< HEAD
<<<<<<< HEAD
@if (usuario.user.Id == 1 || usuario.user.Id == Id)
{
<h3>Modificacion de Usuario</h3>
<h5>Ingresar nuevos datos para @user.Nombre @user.Apellido</h5>
<label for="nom">Nombre: </label>
<input placeholder="Nombre" @bind="user.Nombre" class="form-control" id="nom"><br>
<label for="ape">Apellido: </label>
<input placeholder="Apellido" @bind="user.Apellido" class="form-control" id="ape"><br>
<label for="ema">Email: </label>
<input placeholder="Mail" @bind="user.Email" class="form-control" id="ema"><br>
<label for="pw">Contraseña: </label>
<input type="password" placeholder="" @bind="pass" class="form-control" id="pw"><br>
<button class="btn btn-primary" @onclick="() => Modificar(user)">Guardar cambios</button><br>
}
else
{
<p>el usuario ingresado y el que se quiere modificar no coinciden</p>
}
=======
<h3>Ingresar nuevos datos para @user.Nombre @user.Apellido</h3>
<form>
    <table class="table">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Email</th>
                <th>Password</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input @bind="user.Nombre" class="form-control" id="nom"><br></td>
                <td><input @bind="user.Apellido" class="form-control" id="ape"><br></td>
                <td><input @bind="user.Email" class="form-control" id="ema"><br></td>
                <td><input type="password" @bind="pass" class="form-control" id="pw"><br></td>
            </tr>
        </tbody>
    </table>
</form>
<button class="btn btn-primary" @onclick="() => Modificar(user)">Guardar cambios</button><br>
<button class="btn btn-secondary mt-2" @onclick="Volver">Volver al menu de gestion</button>
>>>>>>> 2a4723181eb53793017accd44a8b979eef5239a4
=======
<h3>Ingresar nuevos datos para @user.Nombre @user.Apellido</h3>
<form>
    <table class="table">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Email</th>
                <th>Password</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input @bind="user.Nombre" class="form-control" id="nom"><br></td>
                <td><input @bind="user.Apellido" class="form-control" id="ape"><br></td>
                <td><input @bind="user.Email" class="form-control" id="ema"><br></td>
                <td><input type="password" @bind="pass" class="form-control" id="pw"><br></td>
            </tr>
        </tbody>
    </table>
</form>
<button class="btn btn-primary" @onclick="() => Modificar(user)">Guardar cambios</button><br>
<button class="btn btn-secondary mt-2" @onclick="Volver">Volver al menu de gestion</button>
>>>>>>> 2a4723181eb53793017accd44a8b979eef5239a4
<br>@error<br>

@code {
    [Parameter] public int Id { get; set; }
    Usuario user = new();
    string pass = "";
    string error = "";

    protected override void OnInitialized()
    {
        try
        {
            user = UsuarioConsulta.Ejecutar(Id);
        }
        catch (Exception ex)
        {
            error = ex.Message;
        }
    }
    private void Modificar(Usuario user)
    {
        try
        {
            user.Contraseña = pass;
            CasoDeUsoUsuarioModificacion.Ejecutar(user);
<<<<<<< HEAD
<<<<<<< HEAD
            Navigation.NavigateTo($"/home");
=======
            Navigation.NavigateTo($"home/{user.Id}");
>>>>>>> 2a4723181eb53793017accd44a8b979eef5239a4
=======
            Navigation.NavigateTo($"home/{user.Id}");
>>>>>>> 2a4723181eb53793017accd44a8b979eef5239a4
        }
        catch (Exception ex)
        {
            error = ex.Message;
        }
    }
    private void Volver()
    {
        Navigation.NavigateTo($"home/{user.Id}");
    }
}
