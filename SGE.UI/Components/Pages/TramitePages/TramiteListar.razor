@page "/tramitelistar/{Id:int}"
@rendermode InteractiveServer
@inject CasoDeUsoTramiteListar CasoListar
@inject CasoDeUsoUsuarioConsultaId UsuarioConsulta
@inject NavigationManager Navigation
<PageTitle>SGE | Tramites</PageTitle>

<h3>Lista de Tramites</h3>
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>ID del expediente</th>
            <th>Etiqueta</th>
            <th>Contenido</th>
            <th>Fecha de creacion</th>
            <th>Fecha de modificacion</th>
            <th>Ultimo usuario en modificarlo</th>
        </tr>
    </thead>
    <tbody>
        @foreach (Tramite t in tramites)
        {
            <tr>
                <td>@t.Id</td>
                <td>@t.ExpedienteId</td>
                <td>@t.Etiqueta</td>
                <td>@t.Contenido</td>
                <td>@t.FechayHoraCr</td>
                <td>@t.FechayHoraMod</td>
                <td>@t.IdUser</td>
            </tr>
        }
    </tbody>
</table>
<button class="btn btn-secondary mt-2" @onclick="Volver">Volver al menu</button>


@code {
  [Parameter] public int Id { get; set; }
  List<Tramite> tramites = [];

  protected override void OnInitialized()
  {
    try
    {
      Usuario user = UsuarioConsulta.Ejecutar(Id);
    }
    catch
    {
      Navigation.NavigateTo("/");
    }
  }

  void Volver()
  {
    Navigation.NavigateTo($"home/{Id}");
  }
}