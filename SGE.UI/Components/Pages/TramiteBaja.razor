@page "/tramitebaja/{Id:int}"
@rendermode InteractiveServer
@inject CasoDeUsoTramiteBaja CasoBaja
@inject CasoDeUsoUsuarioConsultaId CasoDeUsoConsultaUsuarioId
@inject NavigationManager Navigation
<PageTitle>SGE | Tramite</PageTitle>
<h3>Baja de Tramite</h3>
<input placeholder="ID a eliminar" @bind="idTram" class="form-control"><br>
<button class="btn btn-primary" @onclick="() => Eliminar(idTram)">Eliminar</button><br>
<button class="btn btn-secondary mt-2" @onclick="Volver">Volver al menu</button>
@error

@code {
  [Parameter] public int Id { get; set; }
  Usuario user = new();
  int idTram;
  string error = "";

  protected override void OnInitialized()
  {
    user = CasoDeUsoConsultaUsuarioId.Ejecutar(Id);
    StateHasChanged();
  }

  public void Eliminar(int idTram)
  {
    try
    {
      CasoBaja.Ejecutar(idTram, user);
      Navigation.NavigateTo($"/tramitelistar/{user.Id}");
    }
    catch (Exception ex)
    {
      Console.WriteLine("Entra al catch");
      error = ex.Message;
    }
  }

  public void Volver()
  {
    Navigation.NavigateTo($"home/{Id}");
  }
}
